<!DOCTYPE html>
<html>

<head>
    <title>Add Hostel</title>
    <link rel="stylesheet" href="css/navBar.css">
    <link rel="stylesheet" href="css/form.css">
</head>

<body>

    <nav class="navbar">
        <div class="logo">HostelManager</div>
        <ul>
            <li><a href="index.html">Dashboard</a></li>
            <li><a href="allHostels.html">My Hostels</a></li>
            <li><a href="addHostel.html">Add Hostel</a></li>
        </ul>
    </nav>

    <form class="form" id="addHostelForm">
        <h2>Add Hostel</h2>
        <input placeholder="Hostel Name">
        <input placeholder="City">
        <input placeholder="State">
        <input placeholder="Location">
        <input placeholder="Price">
        <input placeholder="Image URL">
        <textarea placeholder="Facilities (comma separated)"></textarea>
        <button>Add Hostel</button>
    </form>

</body>
<script src="api/api.js"></script>
<script src="api/hostels.js"></script>
<script>
    (() => {
        if (localStorage.getItem('managerData') === null) {

            window.open('https://admin-panel-hostelfinder.netlify.app/login.html', '_self')
        } 
    })()
    let ul = document.querySelector('ul');
    let li = document.createElement('li');
    let atag = document.createElement('a');

    atag.innerText = 'Logout';
    atag.addEventListener('click', () => {
        localStorage.removeItem('managerData');

        window.open('https://admin-panel-hostelfinder.netlify.app/login.html', '_self');
    });
    li.append(atag);
    ul.append(li);


    // add data logic


    document.getElementById("addHostelForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const inputs = document.querySelectorAll(".form input, .form textarea");

    const [
        hostelName,
        city,
        state,
        location,
        price,
        imageUrl,
        facilities
    ] = Array.from(inputs).map(input => input.value.trim());

    /* Null / Empty validation */
    if (
        !hostelName ||
        !city ||
        !state ||
        !location ||
        !price ||
        !imageUrl ||
        !facilities
    ) {
        alert("All fields are required");
        return;
    }

    /* Price validation */
    if (isNaN(price) || Number(price) <= 0) {
        alert("Enter a valid price");
        return;
    }

    const hostelData = {
        HostelName: hostelName,
        City: city,
        State: state,
        Location: location,
        Price: Number(price),
        ImageUrl: imageUrl,
        Facilities: facilities.split(",").map(f => f.trim())
    };

    /* Call your existing method */
    console.log(hostelData);
    addHostel(hostelData);

    
});
</script>

</html>