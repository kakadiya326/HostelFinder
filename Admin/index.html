<!DOCTYPE html>
<html>

<head>
    <title>Manager Dashboard</title>
    <link rel="stylesheet" href="css/navBar.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/loader.css">
</head>

<body>

    <nav class="navbar">
        <div class="logo">HostelManager</div>
        <ul>
            <li><a href="https://managers-panel.netlify.app/index.html">Dashboard</a></li>
            <li><a href="https://managers-panel.netlify.app/allHostels.html">My Hostels</a></li>
            <li><a href="https://managers-panel.netlify.app/addHostel.html">Add Hostel</a></li>
            <li><a id="logoutBtn" style="cursor:pointer;">Logout</a></li>
        </ul>
    </nav>

    <div class="dashboard">
    </div>

</body>
<script src="api/api.js"></script>
<script src="api/hostels.js"></script>
<script src="api/room.js"></script>
<script src="api/student.js"></script>
<script src="api/dashboardHelper.js"></script>
<script>

    //=========== GLOBALS =============
    let hostelsData = [];
    let roomsData = [];
    let studentData = [];
    let btnDetails = document.querySelector('button');
    let mainCon = document.querySelector('.dashboard');

    //========= SECURITY ==========
    let manager = JSON.parse(localStorage.getItem("managerData")) || [];
    
    (() => {
        if (!manager || manager.length === 0) {
            window.open('https://managers-panel.netlify.app/login.html', '_self')
        }
    })();
    refreshLocalStorageAndStats(manager[0].id);

    //==========Logout============
    document.getElementById('logoutBtn').onclick = () => {
        localStorage.removeItem('managerData');
        window.open('https://managers-panel.netlify.app/login.html', '_self');
    };

    //====== Dashboard Cards========
    function makeCards(title, val, detial) {
        let card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
            <h3>${title}</h3>
            <p>${val}</p>
        `;
        mainCon.append(card);
    }
</script>

</html>